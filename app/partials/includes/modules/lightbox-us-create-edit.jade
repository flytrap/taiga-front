tg-lightbox-close

form
    h2.title(translate="LIGHTBOX.CREATE_EDIT_US.TITLE")
    fieldset
        input(
            type="text"
            name="subject"
            ng-model-options="{ debounce: 200 }"
            ng-model="us.subject"
            placeholder="{{'COMMON.FIELDS.SUBJECT' | translate}}"
            data-required="true"
            data-maxlength="500"
        )

    fieldset.ticket-estimation
        tg-lb-us-estimation(ng-model="us")

    fieldset
        select(
            name="status"
            ng-model="us.status"
            ng-options="s.id as s.name for s in usStatusList"
        )

    //fieldset
    section.ticket-assigned-to(tg-assigned-to, ng-model="us", required-perm="modify_us")

    fieldset.dates
        div.dropdown
            a.dropdown-toggle(id="dropdownStart" role="button" data-toggle="dropdown" data-target="#" href="#")
                input.date-start(
                    type="text"
                    name="estimated_start"
                    data-ng-model="us.estimated_start"
                    data-required="true"
                    placeholder="{{'LIGHTBOX.ADD_EDIT_SPRINT.PLACEHOLDER_SPRINT_START' | translate}}"
                )
            ul.dropdown-menu(role="menu")
                datetimepicker.dropdown_start(
                    data-ng-model="us.estimated_start"
                    data-datetimepicker-config="{ dropdownSelector: '#dropdownStart' }"
                )

        div.dropdown
            a.dropdown-toggle(id="dropdownEnd" role="button" data-toggle="dropdown" data-target="#" href="#")
                input.date-end(
                    type="text"
                    name="estimated_end"
                    data-ng-model="us.estimated_end"
                    data-required="true"
                    placeholder="{{'LIGHTBOX.ADD_EDIT_SPRINT.PLACEHOLDER_SPRINT_END' | translate}}"
                )
            ul.dropdown-menu(role="menu")
                datetimepicker.dropdown_end(
                    data-ng-model="us.estimated_end"
                    data-datetimepicker-config="{ dropdownSelector: '#dropdownEnd' }"
                )

    fieldset
        tg-tag-line-common.tags-block(
            ng-if="project && createEditUsOpen"
            project="project"
            tags="us.tags"
            permissions="add_us"
            on-add-tag="addTag(name, color)"
            on-delete-tag="deleteTag(tag)"
        )

    fieldset
        textarea.description(
            name="description"
            ng-model="us.description"
            ng-model-options="{ debounce: 200 }"
            ng-attr-placeholder="{{'LIGHTBOX.CREATE_EDIT_US.PLACEHOLDER_DESCRIPTION' | translate}}"
        )
    fieldset
        section
          tg-attachments-simple(
               attachments="attachments",
               on-add="addAttachment(attachment)"
               on-delete="deleteAttachment(attachment)"
          )

    div.settings
        fieldset.team-requirement
            input(
                type="checkbox"
                name="team_requirement"
                ng-model="us.team_requirement"
                id="team-requirement"
                ng-value="true"
            )
            label.requirement.trans-button(
                for="team-requirement"
                translate="US.FIELDS.TEAM_REQUIREMENT"
            )

        fieldset.client-requirement
            input(
                type="checkbox"
                name="client_requirement"
                ng-model="us.client_requirement",
                id="client-requirement"
                ng-value="true"
            )
            label.requirement.trans-button(
                for="client-requirement"
                translate="US.FIELDS.CLIENT_REQUIREMENT"
            )

        fieldset.blocking-flag
            input(
                type="checkbox"
                name="is_blocked"
                ng-model="us.is_blocked"
                id="blocked-us"
                ng-value="true"
            )
            label.blocked.trans-button(
                for="blocked-us"
                translate="COMMON.BLOCKED"
            )

    tg-blocking-message-input(
        watch="us.is_blocked"
        ng-model="us.blocked_note"
    )

    button.button-green.submit-button(
        type="submit"
        title="{{'COMMON.CREATE' | translate}}"
        translate="COMMON.CREATE"
    )
